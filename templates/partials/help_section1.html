{% if emp %}
<div class="card mb-4 shadow">
  <div class="card-body">
    <h5 class="card-title">ูุนูููุงุช ุงูููุธู</h5>
    <p><strong>ุฑูู ุงูุฌูุฉ:</strong> {{ emp.nono }}</p>
    <p><strong>ุงูุงุณู:</strong> {{ emp.name }}</p>
    <p><strong>ุงูููุน:</strong> {{ emp.six_type }} - {{ emp.mared }}</p>
    <p><strong>ุงููุธููุฉ:</strong> {{ emp.type_work }}</p>
    <p><strong>ุงูุนููุงู:</strong> {{ emp.addres }}</p>
    <p><strong>ุงููููุน:</strong> {{ emp.locat_na }}</p>

    <button class="btn btn-success mt-3" data-bs-toggle="modal" data-bs-target="#addHelpModal">
      โ ุฅุถุงูุฉ ููุญุฉ ุฌุฏูุฏุฉ
    </button>
  </div>
</div>
{% endif %}

{% if helps %}
<div class="table-responsive">
  <table class="table table-bordered text-center table-hover small">
    <thead class="table-light">
      <tr>
        <th>ุงูุชุงุฑูุฎ</th>
        <th>ุชุงุฑูุฎ ุงูุฌูุณุฉ</th>
        <th>ุงููุจูุบ</th>
        <th>ุนุฏุฏ ุงูููุญ</th>
        <th>ุชูุงุตูู</th>
        <th>ุฅุฌุฑุงุกุงุช</th>
      </tr>
    </thead>
    <tbody>
      {% for h in helps %}
      <tr>
        <td>{{ h.date1 }}</td>
        <td>{{ h.date2 }}</td>
        <td>{{ h.pay }}</td>
        <td>{{ h.no_pay }}</td>
        <td>{{ h.detail or "-" }}</td>
        <td>
          <a href="#" class="text-warning me-2" data-bs-toggle="modal" data-bs-target="#editHelpModal_{{ h.id }}">
            <i class="bi bi-pencil-square fs-5"></i>
          </a>
          <a href="#" class="text-danger" data-bs-toggle="modal" data-bs-target="#deleteHelpModal_{{ h.id }}">
            <i class="bi bi-trash fs-5"></i>
          </a>
        </td>
      </tr>

      <!-- Modal ุงูุชุนุฏูู -->
      <div class="modal fade" id="editHelpModal_{{ h.id }}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
          <form class="modal-content" onsubmit="event.preventDefault(); updateHelp('{{ h.id }}');">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="modal-header bg-warning text-white">
              <h5 class="modal-title">โ๏ธ ุชุนุฏูู ููุญุฉ</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <input type="hidden" name="id" value="{{ h.id }}">
              <input type="date" name="date1" class="form-control mb-2" value="{{ h.date1 }}" required>
              <input type="date" name="date2" class="form-control mb-2" value="{{ h.date2 }}" required>
              <input type="number" name="pay" class="form-control mb-2" value="{{ h.pay }}" required>
              <input type="number" name="no_pay" class="form-control mb-2" value="{{ h.no_pay }}">
              <textarea name="detail" class="form-control mb-2">{{ h.detail }}</textarea>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-warning">ุชุญุฏูุซ</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal ุงูุญุฐู -->
      <div class="modal fade" id="deleteHelpModal_{{ h.id }}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
          <form class="modal-content" onsubmit="event.preventDefault(); deleteHelp('{{ h.id }}');">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="id" value="{{ h.id }}">
            <div class="modal-header bg-danger text-white">
              <h5 class="modal-title">๐ ุชุฃููุฏ ุงูุญุฐู</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐู ุงูููุญุฉ ุจุชุงุฑูุฎ <strong>{{ h.date1 }}</strong>ุ
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-danger">ูุนูุ ุญุฐู</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
            </div>
          </form>
        </div>
      </div>

      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}

<!-- Modal ุงูุฅุถุงูุฉ -->
<div class="modal fade" id="addHelpModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="addHelpForm" onsubmit="event.preventDefault(); saveHelp();">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="modal-header bg-success text-white">
        <h5 class="modal-title">โ ุฅุถุงูุฉ ููุญุฉ ุฌุฏูุฏุฉ</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" name="nono" value="{{ emp.nono }}">
        <input type="hidden" name="name" value="{{ emp.name }}">
        <input type="date" name="date1" class="form-control mb-2" required>
        <input type="date" name="date2" class="form-control mb-2" required>
        <input type="number" name="pay" class="form-control mb-2" placeholder="ูุจูุบ ุงูููุญุฉ" required>
        <input type="number" name="no_pay" class="form-control mb-2" placeholder="ุนุฏุฏ ุงูููุญ">
        <textarea name="detail" class="form-control mb-2" placeholder="ุชูุงุตูู ุฅุถุงููุฉ"></textarea>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success">ุฅุถุงูุฉ</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
      </div>
    </form>
  </div>
</div>
